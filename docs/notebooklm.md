# NotebookLM 連携機能

PaperFetchの強力な機能の一つとして、GoogleのAIノートブックツール「[NotebookLM](https://notebooklm.google.com/)」への自動連携があります。
ダウンロードした論文PDFを手動でアップロードする手間を省き、シームレスにRAG（検索拡張生成）環境を構築できます。

## 機能概要

- **自動アップロード**: ローカルにダウンロードしたPDFファイルを、指定したNotebookLMのノートブックに追加します。
- **Direct Open**: ノートブックIDを指定することで、アップロード完了後にそのノートブックを直接開きます。
- **Session Resume**: 前回作業したノートブック情報を保持し、次回以降も同じノートブックに継続して論文を追加できます。
- **Patchright採用**: 自動化対策回避能力の高いブラウザ操作ツールを採用し、安定した動作を実現しています。

## 事前準備

[インストールガイド](installation.md) に従い、`patchright` のセットアップを完了させておく必要があります。

```bash
uv run patchright install chromium
```

## 使い方 (GUI)

1.  Web GUI (`paper-fetch-gui`) を起動し、論文を検索・選択します。
2.  画面下部またはサイドバーの **Export Actions** タブを選択します。
3.  **Target** で `NotebookLM` を選択します。
4.  モードを選択します：
    - **Create New Notebook**: 新しいノートブックを作成してアップロードします。
    - **Add to Existing Notebook**: 既存のノートブックに追加します。
        - 以前のセッション情報がある場合は自動的に選択されます。
        - 任意のノートブックに追加したい場合は、Notebook ID（URLの `notebook/` 以降の文字列）を入力してください。
5.  **Execute** ボタンを押すとブラウザが起動し、自動操作が始まります。
    - Googleアカウントへのログインが必要な場合は、ブラウザ上で手動ログインを行ってください（スクリプトはログイン待機します）。

## 技術仕様

- **セッション情報**: 各ダウンロードフォルダ内に `notebooklm_session.json` が生成され、作成されたノートブックのIDやURLが記録されます。
- **ブラウザ制御**: ユーザーのブラウザプロファイル（Cookie等）は基本的には共有されませんが、ログイン状態の保持のために特定のプロファイルディレクトリを使用する場合があります（設定依存）。
